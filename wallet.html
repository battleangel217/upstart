<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Wallet - Upstart</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="wallet.css">
    <link rel="icon" href="https://icuklzexzhusblkzglnr.supabase.co/storage/v1/object/public/marketplace/logo/Upstart_3_-removebg-preview.png" type="image/png">
    <link rel="apple-touch-icon" href="https://icuklzexzhusblkzglnr.supabase.co/storage/v1/object/public/marketplace/logo/Upstart_3_-removebg-preview.png">
</head>
<body>
    <!-- Removed custom navbar - now uses shared navbar injected by shared-nav.js -->

    <main class="main-content">
        <div class="wallet-container">
            <!-- Balance Card -->
            <div class="balance-card">
                <h2>Wallet Balance</h2>
                <div class="balance-amount" id="balanceAmount">₦0.00</div>
                <p class="balance-label">Available for withdrawal</p>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn-primary" id="addMoneyBtn">+ Add Money</button>
                <button class="btn-secondary" id="withdrawBtn">Withdraw Money</button>
            </div>

            <!-- Transaction History -->
            <div class="transactions-card">
                <h3>Transaction History</h3>
                <div class="transactions-list" id="transactionsList">
                    <p class="empty-message">No transactions yet</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Add Money Drawer -->
    <div class="drawer" id="addMoneyDrawer">
        <div class="drawer-content">
            <div class="drawer-header">
                <h3>Add Money to Wallet</h3>
                <button class="close-btn" onclick="closeDrawer('addMoneyDrawer')">✕</button>
            </div>
            <div class="drawer-body">
                <div class="form-group">
                    <label>Amount</label>
                    <input type="number" id="addMoneyAmount" placeholder="Enter amount" min="1">
                </div>
                <!-- <div class="form-group">
                    <label>Payment Method</label>
                    <select id="paymentMethod">
                        <option>Credit Card</option>
                        <option>Debit Card</option>
                        <option>Bank Transfer</option>
                    </select>
                </div> -->
                <button class="btn-primary" id="submitAddMoney">Add Money</button>
            </div>
        </div>
    </div>

    <!-- Withdraw Drawer -->
    <div class="drawer" id="withdrawDrawer">
        <div class="drawer-content">
            <div class="drawer-header">
                <h3>Withdraw Money</h3>
                <button class="close-btn" onclick="closeDrawer('withdrawDrawer')">✕</button>
            </div>
            <div class="drawer-body">
                <div class="form-group">
                    <label>Amount</label>
                    <input type="number" id="withdrawAmount" placeholder="Enter amount" min="1">
                </div>
                <div class="form-group">
                    <label>Bank Account</label>
                    <input type="text" id="bankAccount" placeholder="Enter account number">
                </div>
                <div class="form-group">
                    <label>Routing Number</label>
                    <input type="text" id="routingNumber" placeholder="Enter routing number">
                </div>
                <button class="btn-primary" id="submitWithdraw">Withdraw</button>
            </div>
        </div>
    </div>

    <div class="drawer-overlay" id="drawerOverlay" onclick="closeAllDrawers()"></div>

    <!-- Payment Verification Modal -->
    <div class="payment-modal" id="paymentModal">
        <div class="payment-modal-content">
            <div class="payment-status" id="paymentStatus">
                <!-- Success State -->
                <div id="successState" class="status-state">
                    <div class="status-icon success">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                            <circle cx="32" cy="32" r="32" fill="#4ad77c"/>
                            <path d="M27 35L21 29M27 35L43 19" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                        </svg>
                    </div>
                    <h3>Payment Successful!</h3>
                    <p id="successMessage">Your wallet has been topped up successfully.</p>
                    <div class="transaction-details">
                        <div class="detail-row">
                            <span class="detail-label">Amount Added:</span>
                            <span class="detail-value" id="successAmount">₦0.00</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Reference:</span>
                            <span class="detail-value" id="successReference">-</span>
                        </div>
                    </div>
                    <button class="btn-primary" onclick="closePaymentModal()">Done</button>
                </div>

                <!-- Failed State -->
                <div id="failedState" class="status-state" style="display:none;">
                    <div class="status-icon failed">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                            <circle cx="32" cy="32" r="32" fill="#ff4d4d"/>
                            <path d="M22 22L42 42M42 22L22 42" stroke="white" stroke-width="3" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h3>Payment Failed</h3>
                    <p id="failedMessage">Your payment could not be processed. Please try again.</p>
                    <div class="transaction-details">
                        <div class="detail-row">
                            <span class="detail-label">Reference:</span>
                            <span class="detail-value" id="failedReference">-</span>
                        </div>
                    </div>
                    <button class="btn-primary" onclick="retryPayment()">Try Again</button>
                </div>

                <!-- Loading State -->
                <div id="loadingState" class="status-state">
                    <div class="status-icon loading">
                        <div class="spinner"></div>
                    </div>
                    <h3>Verifying Payment</h3>
                    <p>Please wait while we verify your payment...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Overlay -->
    <div class="payment-modal-overlay" id="paymentModalOverlay"></div>

    <!-- Added shared-nav.js to inject universal navbar -->
    <script src="shared-nav.js"></script>
    <script src="wallet.js"></script>
</body>
</html>
