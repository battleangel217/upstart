<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upstart Platform - API Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui.min.css">
    <style>
        html {
            box-sizing: border-box;
            overflow: -moz-scrollbars-vertical;
            overflow-y: scroll;
        }
        *, *:before, *:after {
            box-sizing: inherit;
        }
        body {
            margin: 0;
            background: #fafafa;
        }
        .swagger-ui .topbar {
            background-color: #1c6ef2;
        }
        .swagger-ui .topbar-wrapper h1 a {
            color: white;
        }
    </style>
</head>
<body>
    <div id="swagger-ui"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-standalone-preset.min.js"></script>
    <script>
        const swaggerSpec = {
  "openapi": "3.0.0",
  "info": {
    "title": "Upstart Platform API",
    "description": "Peer-to-peer student marketplace with vendor support and messaging",
    "version": "1.0.0",
    "contact": {
      "name": "Upstart Support",
      "email": "support@upstart.com"
    },
    "license": {
      "name": "MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000/api",
      "description": "Development server"
    },
    {
      "url": "https://api.upstart.com/api",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication endpoints"
    },
    {
      "name": "Products",
      "description": "Product management and browsing"
    },
    {
      "name": "Vendors",
      "description": "Vendor profiles and information"
    },
    {
      "name": "Cart",
      "description": "Shopping cart operations"
    },
    {
      "name": "Chat",
      "description": "Messaging between users"
    },
    {
      "name": "Wallet",
      "description": "Wallet and transaction management"
    },
    {
      "name": "Users",
      "description": "User profile management"
    },
    {
      "name": "Analytics",
      "description": "Vendor analytics and statistics"
    },
    {
      "name": "Leaderboard",
      "description": "Rankings and top performers"
    },
    {
      "name": "Notifications",
      "description": "User notifications"
    },
    {
      "name": "Videos",
      "description": "Video content management"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 1
          },
          "username": {
            "type": "string",
            "example": "john_doe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "john@student.edu"
          },
          "phone": {
            "type": "string",
            "example": "5551234567"
          },
          "university": {
            "type": "string",
            "example": "State University"
          },
          "role": {
            "type": "string",
            "enum": ["buyer", "vendor"],
            "example": "buyer"
          },
          "profilePicture": {
            "type": "string",
            "nullable": true,
            "example": "https://example.com/profile.jpg"
          },
          "walletBalance": {
            "type": "number",
            "format": "double",
            "example": 250.50
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2025-12-04T10:00:00Z"
          }
        }
      },
      "Vendor": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 101
          },
          "name": {
            "type": "string",
            "example": "TechSmart"
          },
          "email": {
            "type": "string",
            "example": "tech@upstart.com"
          },
          "phone": {
            "type": "string",
            "example": "5551234567"
          },
          "university": {
            "type": "string",
            "example": "State University"
          },
          "department": {
            "type": "string",
            "example": "Computer Science"
          },
          "averageRating": {
            "type": "number",
            "format": "double",
            "minimum": 0,
            "maximum": 5,
            "example": 4.7
          },
          "totalSales": {
            "type": "integer",
            "example": 25
          },
          "reviews": {
            "type": "integer",
            "example": 50
          }
        }
      },
      "Product": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 1
          },
          "name": {
            "type": "string",
            "example": "MacBook Pro 13\""
          },
          "price": {
            "type": "number",
            "format": "double",
            "example": 899.00
          },
          "category": {
            "type": "string",
            "enum": ["electronics", "furniture", "clothing", "sports", "books"],
            "example": "electronics"
          },
          "description": {
            "type": "string",
            "example": "Barely used, excellent condition. Includes charger and box."
          },
          "vendorId": {
            "type": "integer",
            "example": 101
          },
          "rating": {
            "type": "number",
            "format": "double",
            "example": 4.8
          },
          "reviews": {
            "type": "integer",
            "example": 12
          },
          "viewCount": {
            "type": "integer",
            "example": 234
          },
          "likes": {
            "type": "integer",
            "example": 45
          }
        }
      },
      "Message": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 1
          },
          "fromId": {
            "type": "integer",
            "example": 1
          },
          "toId": {
            "type": "integer",
            "example": 101
          },
          "text": {
            "type": "string",
            "example": "Hi! Is the MacBook still available?"
          },
          "date": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Transaction": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 1
          },
          "type": {
            "type": "string",
            "enum": ["credit", "debit"],
            "example": "credit"
          },
          "amount": {
            "type": "number",
            "format": "double",
            "example": 100.00
          },
          "description": {
            "type": "string",
            "example": "Added to wallet"
          },
          "date": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    }
  },
  "paths": {
    "/auth/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Register new user",
        "operationId": "registerUser",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["username", "email", "password", "phone", "university", "role"],
                "properties": {
                  "username": {
                    "type": "string",
                    "example": "john_doe"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "john@student.edu"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "securePassword123"
                  },
                  "phone": {
                    "type": "string",
                    "example": "5551234567"
                  },
                  "university": {
                    "type": "string",
                    "example": "State University"
                  },
                  "role": {
                    "type": "string",
                    "enum": ["buyer", "vendor"],
                    "example": "buyer"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "User login",
        "operationId": "loginUser",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "john@student.edu"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "securePassword123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIs..."
                    },
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/products": {
      "get": {
        "tags": ["Products"],
        "summary": "Get all products",
        "operationId": "getProducts",
        "parameters": [
          {
            "name": "category",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["electronics", "furniture", "clothing", "sports", "books"]
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of products",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Product"
                      }
                    },
                    "total": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/products/{id}": {
      "get": {
        "tags": ["Products"],
        "summary": "Get product details",
        "operationId": "getProduct",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Product"
                }
              }
            }
          }
        }
      }
    },
    "/vendors": {
      "get": {
        "tags": ["Vendors"],
        "summary": "Get all vendors",
        "operationId": "getVendors",
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of vendors",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Vendor"
                      }
                    },
                    "total": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/vendors/{id}": {
      "get": {
        "tags": ["Vendors"],
        "summary": "Get vendor profile",
        "operationId": "getVendor",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Vendor profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Vendor"
                }
              }
            }
          }
        }
      }
    },
    "/cart": {
      "get": {
        "tags": ["Cart"],
        "summary": "Get shopping cart",
        "operationId": "getCart",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User's cart",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array"
                    },
                    "total": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/cart/items": {
      "post": {
        "tags": ["Cart"],
        "summary": "Add product to cart",
        "operationId": "addToCart",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "productId": {
                    "type": "integer"
                  },
                  "quantity": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Item added to cart"
          }
        }
      }
    },
    "/messages": {
      "get": {
        "tags": ["Chat"],
        "summary": "Get all conversations",
        "operationId": "getConversations",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of conversations"
          }
        }
      }
    },
    "/messages/{userId}": {
      "get": {
        "tags": ["Chat"],
        "summary": "Get message history",
        "operationId": "getMessages",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Message history",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "messages": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Message"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/messages/send": {
      "post": {
        "tags": ["Chat"],
        "summary": "Send message",
        "operationId": "sendMessage",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "toId": {
                    "type": "integer"
                  },
                  "text": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message sent",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Message"
                }
              }
            }
          }
        }
      }
    },
    "/wallet": {
      "get": {
        "tags": ["Wallet"],
        "summary": "Get wallet info",
        "operationId": "getWallet",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Wallet information"
          }
        }
      }
    },
    "/transactions": {
      "get": {
        "tags": ["Wallet"],
        "summary": "Get transaction history",
        "operationId": "getTransactions",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Transaction list",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transactions": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Transaction"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/{id}": {
      "get": {
        "tags": ["Users"],
        "summary": "Get user profile",
        "operationId": "getUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          }
        }
      }
    },
    "/analytics/dashboard": {
      "get": {
        "tags": ["Analytics"],
        "summary": "Get vendor analytics",
        "operationId": "getAnalyticsDashboard",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Analytics data"
          }
        }
      }
    },
    "/leaderboard/vendors": {
      "get": {
        "tags": ["Leaderboard"],
        "summary": "Get top vendors",
        "operationId": "getTopVendors",
        "responses": {
          "200": {
            "description": "Top vendors"
          }
        }
      }
    },
    "/leaderboard/products": {
      "get": {
        "tags": ["Leaderboard"],
        "summary": "Get top products",
        "operationId": "getTopProducts",
        "responses": {
          "200": {
            "description": "Top products"
          }
        }
      }
    },
    "/notifications": {
      "get": {
        "tags": ["Notifications"],
        "summary": "Get notifications",
        "operationId": "getNotifications",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Notifications list"
          }
        }
      }
    },
    "/videos": {
      "get": {
        "tags": ["Videos"],
        "summary": "Get all videos",
        "operationId": "getVideos",
        "responses": {
          "200": {
            "description": "Videos list"
          }
        }
      }
    },
    "/videos/{id}/like": {
      "post": {
        "tags": ["Videos"],
        "summary": "Like a video",
        "operationId": "likeVideo",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Video liked"
          }
        }
      }
    },
    "/videos/{id}/comments": {
      "get": {
        "tags": ["Videos"],
        "summary": "Get video comments",
        "operationId": "getVideoComments",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Comments list"
          }
        }
      },
      "post": {
        "tags": ["Videos"],
        "summary": "Add comment to video",
        "operationId": "addVideoComment",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "text": {
                    "type": "string"
                  },
                  "rating": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Comment added"
          }
        }
      }
    }
  }
};

        const ui = SwaggerUIBundle({
            spec: swaggerSpec,
            dom_id: '#swagger-ui',
            deepLinking: true,
            presets: [
                SwaggerUIBundle.presets.apis,
                SwaggerUIBundle.SwaggerUIStandalonePreset
            ],
            plugins: [
                SwaggerUIBundle.plugins.DownloadUrl
            ],
            layout: "BaseLayout",
            onComplete: function() {
                console.log("✅ Swagger UI loaded successfully!");
            },
            onFailure: function(error) {
                console.error("❌ Failed to load Swagger UI:", error);
            }
        })

        // Make ui available globally
        window.ui = ui
    </script>
</body>
</html>
